<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Photography Portfolio</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;700&family=Source+Sans+Pro:wght@300;400;600&display=swap');
        
        * { margin: 0; padding: 0; box-sizing: border-box; }
        
        html { scroll-behavior: smooth; }

        body { 
            font-family: 'Source Sans Pro', sans-serif; 
            line-height: 1.6; 
            color: #333; 
            overflow-x: hidden; 
        }

        /* Intro Animation Overlay */
        #intro-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            background: #ffffff;
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 9999;
            animation: fadeOutIntro 1.5s ease-out 2s forwards;
        }

        #intro-overlay h1 {
            font-family: 'Playfair Display', serif;
            font-size: 3rem;
            color: #333;
            opacity: 0;
            animation: fadeInText 1s ease-in 0.5s forwards;
        }

        @keyframes fadeInText {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        @keyframes fadeOutIntro {
            from { opacity: 1; }
            to { opacity: 0; pointer-events: none; }
        }

        /* Removed header */

        main { 
            /* Remove margin-top that was for the fixed header */
            margin-top: 0; 
        }

        .hero { 
            position: relative; 
            /* Set height to 100vh to fill the screen */
            height: 100vh; 
            overflow: hidden; 
            /* Hide the main content initially until intro is done */
            opacity: 0;
            animation: fadeInMain 0.5s ease-in 3.5s forwards;
        }

        @keyframes fadeInMain {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        .slideshow-container { 
            position: relative; 
            width: 100%; 
            height: 100%; 
        }

        .slide { 
            position: absolute; 
            top: 0; 
            left: 0; 
            width: 100%; 
            height: 100%; 
            opacity: 0; 
            transition: opacity 1s ease-in-out; 
            /* Added white background for 'contain' effect */
            background-color: #ffffff; 
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .slide.active { 
            opacity: 1; 
        }

        .slide img { 
            width: 100%; 
            height: 100%; 
            /* Changed from 'cover' to 'contain' */
            object-fit: contain; 
        }

        .slide-overlay { 
            position: absolute; 
            top: 0; 
            left: 0; 
            right: 0; 
            bottom: 0; 
            background: linear-gradient(rgba(0,0,0,0.0), rgba(0,0,0,0.2)); 
            display: flex; 
            align-items: center; 
            justify-content: center; 
            flex-direction: column; 
            color: white; 
            text-align: center; 
            /* Make overlay partially transparent so 'contain' bg isn't solid black */
            background-color: rgba(0,0,0,0.1);
        }

        .hero-title { 
            font-family: 'Playfair Display', serif; 
            font-size: 4rem; 
            font-weight: 700; 
            margin-bottom: 20px; 
            text-shadow: 2px 2px 4px rgba(0,0,0,0.5); 
        }
        
        .hero-subtitle { 
            font-size: 1.5rem; 
            font-weight: 300; 
            text-shadow: 1px 1px 2px rgba(0,0,0,0.5); 
        }

        .thumbnail-bar { 
            position: absolute; 
            bottom: 30px; 
            left: 50%; 
            transform: translateX(-50%); 
            display: flex; 
            gap: 10px; 
            background: rgba(255, 255, 255, 0.9); 
            padding: 15px; 
            border-radius: 30px; 
            backdrop-filter: blur(10px); 
            z-index: 50; /* Ensure it's above slide */
        }

        .thumbnail { 
            width: 60px; 
            height: 60px; 
            border-radius: 50%; 
            overflow: hidden; 
            cursor: pointer; 
            border: 3px solid transparent; 
            transition: border-color 0.3s; 
        }
        
        .thumbnail.active { 
            border-color: #c9a96e; 
        }
        
        .thumbnail img { 
            width: 100%; 
            height: 100%; 
            object-fit: cover; 
        }
        
        .section { 
            padding: 80px 40px; 
            max-width: 1200px; 
            margin: 0 auto; 
        }
        
        .section-title { 
            font-family: 'Playfair Display', serif; 
            font-size: 3rem; 
            text-align: center; 
            margin-bottom: 60px; 
            color: #333; 
        }
        
        .stories-grid { 
            display: grid; 
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr)); 
            gap: 30px; 
            margin-bottom: 50px; 
        }
        
        .story-item { 
            position: relative; 
        }
        
        .story-card { 
            position: relative; 
            height: 300px; 
            border-radius: 15px; 
            overflow: hidden; 
            cursor: pointer; 
            transition: transform 0.3s ease; 
            z-index: 5; /* Ensure card is above dropdown */
        }
        
        .story-card:hover { 
            transform: translateY(-10px); 
        }
        
        .story-card img { 
            width: 100%; 
            height: 100%; 
            object-fit: cover; 
            transition: scale 0.3s ease; 
        }
        
        .story-card:hover img { 
            scale: 1.05; 
        }
        
        .story-overlay { 
            position: absolute; 
            bottom: 0; 
            left: 0; 
            right: 0; 
            background: linear-gradient(transparent, rgba(0,0,0,0.8)); 
            color: white; 
            padding: 30px; 
        }
        
        .story-title { 
            font-family: 'Playfair Display', serif; 
            font-size: 1.8rem; 
            margin-bottom: 10px; 
        }
        
        .story-subtitle { 
            font-size: 1rem; 
            opacity: 0.9; 
        }
        
        .story-dropdown { 
            overflow: hidden; 
            max-height: 0; 
            transition: max-height 0.5s ease-out; 
            background: #f8f8f8; 
            border-radius: 0 0 15px 15px; 
            margin-top: -15px; /* Pulls it up behind the card */
            position: relative; 
            z-index: 1; /* Behind the card */
            padding-top: 15px; /* To account for margin-top */
        }
        
        .story-dropdown.active { 
            max-height: 600px; /* Set max height for list */
            overflow-y: auto; /* Make it scrollable */
        }
        
        /* Story photos list view */
        .story-photos { 
            display: flex; /* Changed from grid */
            flex-direction: column; /* Vertical list */
            gap: 15px; 
            padding: 30px; 
        }
        
        .story-photo { 
            /* aspect-ratio: 1; Removed to allow natural height */
            border-radius: 10px; 
            overflow: hidden; 
            cursor: pointer; 
            transition: transform 0.3s ease; 
            width: 100%;
            background: #eee; /* Background for loading images */
        }
        
        .story-photo:hover { 
            transform: scale(1.02); 
        }
        
        .story-photo img { 
            width: 100%; 
            height: auto; /* Allow natural height */
            object-fit: contain; /* Show full image */
            display: block;
        }

        .messages-section { 
            background: #f8f8f8; 
            position: relative; 
            overflow: hidden; 
        }
        
        .messages-slider { 
            position: relative; 
            overflow: hidden; 
            height: 400px; 
        }
        
        .message-container { 
            display: flex; 
            transition: transform 0.5s ease; 
            height: 100%;
        }
        
        .message { 
            min-width: 100%; 
            padding: 0 20px; 
            display: flex; 
            align-items: center; 
            justify-content: center; 
            text-align: center; 
            position: relative; 
            height: 100%;
        }
        
        .message-bg { 
            position: absolute; 
            top: 0; 
            left: 0; 
            width: 100%; 
            height: 100%; 
            background-size: cover; 
            background-position: center; 
            /* Updated filter: blur and 25% brightness */
            filter: blur(5px) brightness(0.25); 
            z-index: 1; 
            /* Added transform for smoother bg transition (optional) */
            transform: scale(1.1);
        }
        
        .message-content { 
            max-width: 600px; 
            position: relative; 
            z-index: 2; 
        }
        
        .message-text { 
            font-size: 1.3rem; 
            font-style: italic; 
            color: white; 
            margin-bottom: 20px; 
            line-height: 1.8; 
            text-shadow: 2px 2px 4px rgba(0,0,0,0.7); 
        }
        
        .message-author { 
            font-weight: 600; 
            color: #c9a96e; 
            text-shadow: 1px 1px 2px rgba(0,0,0,0.7); 
        }
        
        .slider-nav { 
            position: absolute; 
            top: 50%; 
            transform: translateY(-50%); 
            background: rgba(255, 255, 255, 0.9); 
            border: none; 
            width: 50px; 
            height: 50px; 
            border-radius: 50%; 
            cursor: pointer; 
            font-size: 20px; 
            color: #333; 
            transition: background 0.3s; 
            z-index: 10; 
        }
        
        .slider-nav:hover { 
            background: white; 
        }
        
        .slider-nav.prev { 
            left: 20px; 
        }
        
        .slider-nav.next { 
            right: 20px; 
        }

        /* AI Inquiry Section */
        #inquiry {
            background-color: #ffffff;
        }

        .inquiry-form-container {
            max-width: 700px;
            margin: 0 auto;
            background: #fdfdfd;
            padding: 40px;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.05);
        }

        .inquiry-subtitle {
            text-align: center;
            font-size: 1.2rem;
            margin-bottom: 30px;
            color: #555;
        }

        .inquiry-form {
            display: grid;
            grid-template-columns: 1fr;
            gap: 20px;
        }

        @media (min-width: 600px) {
            .inquiry-form {
                grid-template-columns: 1fr 1fr;
            }
            .inquiry-form .form-group:nth-child(3),
            .inquiry-form .gemini-btn {
                grid-column: 1 / -1;
            }
        }

        .form-group {
            display: flex;
            flex-direction: column;
        }

        .form-group label {
            font-weight: 600;
            margin-bottom: 8px;
            color: #333;
        }

        .form-group input,
        .form-group select {
            width: 100%;
            padding: 12px;
            border: 1px solid #ddd;
            border-radius: 8px;
            font-size: 1rem;
            font-family: 'Source Sans Pro', sans-serif;
            background: #fff;
        }

        .gemini-btn {
            background: linear-gradient(45deg, #4a90e2, #50e3c2);
            color: white;
            padding: 15px 30px;
            font-size: 1.1rem;
            font-weight: 600;
            text-decoration: none;
            border-radius: 50px;
            transition: transform 0.3s, box-shadow 0.3s;
            text-transform: uppercase;
            letter-spacing: 1px;
            border: none;
            cursor: pointer;
            width: 100%;
        }

        .gemini-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 25px rgba(74, 144, 226, 0.3);
        }

        .loader {
            width: 40px;
            height: 40px;
            border: 4px solid #f3f3f3;
            border-top: 4px solid #4a90e2;
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin: 30px auto 0;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .gemini-response {
            margin-top: 30px;
            background: #f8f8f8;
            padding: 20px;
            border-radius: 8px;
            line-height: 1.7;
            color: #333;
        }
        
        .gemini-response h3 {
            font-family: 'Playfair Display', serif;
            font-size: 1.5rem;
            color: #333;
            margin-top: 15px;
            margin-bottom: 10px;
        }

        .gemini-response ul {
            list-style-position: inside;
            padding-left: 10px;
        }

        .gemini-response li {
            margin-bottom: 8px;
        }
        
        .footer { 
            text-align: center; 
            padding: 80px 40px; 
            background: #333; 
            color: white; 
        }
        
        .book-us-btn { 
            display: inline-block; 
            background: linear-gradient(45deg, #c9a96e, #e6d7b8); 
            color: white; 
            padding: 20px 50px; 
            font-size: 1.3rem; 
            font-weight: 600; 
            text-decoration: none; 
            border-radius: 50px; 
            margin-bottom: 40px; 
            transition: transform 0.3s, box-shadow 0.3s; 
            text-transform: uppercase; 
            letter-spacing: 1px; 
        }
        
        .book-us-btn:hover { 
            transform: translateY(-3px); 
            box-shadow: 0 10px 25px rgba(201, 169, 110, 0.3); 
        }
        
        .contact-links { 
            display: flex; 
            justify-content: center; 
            gap: 30px; 
            margin-top: 30px; 
        }
        
        .contact-link { 
            color: white; 
            text-decoration: none; 
            font-size: 1.1rem; 
            transition: color 0.3s; 
        }
        
        .contact-link:hover { 
            color: #c9a96e; 
        }
        
        .lightbox { 
            position: fixed; 
            top: 0; 
            left: 0; 
            width: 100%; 
            height: 100%; 
            background: rgba(0, 0, 0, 0.9); 
            display: none; 
            align-items: center; 
            justify-content: center; 
            z-index: 2000; 
        }
        
        .lightbox-content { 
            position: relative; 
            max-width: 90%; 
            max-height: 90%; 
        }
        
        .lightbox img { 
            /* Changed to 'contain' for lightbox as well */
            width: 100%; 
            height: 100%; 
            object-fit: contain; 
            max-width: 90vw;
            max-height: 90vh;
        }
        
        .lightbox-close { 
            position: absolute; 
            top: 20px; 
            right: 20px; 
            color: white; 
            font-size: 30px; 
            cursor: pointer; 
            background: rgba(0, 0, 0, 0.5); 
            width: 50px; 
            height: 50px; 
            border-radius: 50%; 
            display: flex; 
            align-items: center; 
            justify-content: center; 
            z-index: 2001; 
        }
        
        .lightbox-nav { 
            position: absolute; 
            top: 50%; 
            transform: translateY(-50%); 
            color: white; 
            font-size: 24px; 
            cursor: pointer; 
            background: rgba(0, 0, 0, 0.5); 
            width: 60px; 
            height: 60px; 
            border-radius: 50%; 
            display: flex; 
            align-items: center; 
            justify-content: center; 
            z-index: 2001; 
        }
        
        .lightbox-nav.prev { 
            left: 20px; 
        }
        
        .lightbox-nav.next { 
            right: 20px; 
        }
        
        @media (max-width: 768px) {
            #intro-overlay h1 { font-size: 2rem; }
            .hero-title { font-size: 2.5rem; }
            .hero-subtitle { font-size: 1.2rem; }
            .section { padding: 60px 20px; }
            .section-title { font-size: 2.2rem; }
            .stories-grid { grid-template-columns: 1fr; }
            .thumbnail-bar { bottom: 20px; padding: 10px; gap: 8px; }
            .thumbnail { width: 40px; height: 40px; }
            .contact-links { flex-direction: column; gap: 20px; }
            .message-text { font-size: 1.1rem; }
            .inquiry-form-container { padding: 30px 20px; }
        }
    </style>
</head>
<body>

    <!-- Intro Animation Overlay -->
    <div id="intro-overlay">
        <h1>Photos by Nitin</h1>
    </div>

    <!-- Header removed -->

    <main>
        <section id="home" class="hero">
            <div class="slideshow-container">
                <!-- Slides (Images will 'contain' with white bg) -->
                <div class="slide active"><img src="https://raw.githubusercontent.com/photosbynithin/Photosbynithin/main/Images/Slide%20Show/Slide%20(1).jpg" alt="Hero 1"><div class="slide-overlay"><h1 class="hero-title">Capturing Moments</h1><p class="hero-subtitle">Creating memories that last forever</p></div></div>
                <div class="slide"><img src="https://raw.githubusercontent.com/photosbynithin/Photosbynithin/main/Images/Slide%20Show/Slide%20(2).jpg" alt="Hero 2"><div class="slide-overlay"><h1 class="hero-title">Love Stories</h1><p class="hero-subtitle">Every picture tells a story</p></div></div>
                <div class="slide"><img src="https://raw.githubusercontent.com/photosbynithin/Photosbynithin/main/Images/Slide%20Show/Slide%20(3).jpg" alt="Hero 3"><div class="slide-overlay"><h1 class="hero-title">Special Celebrations</h1><p class="hero-subtitle">Making every moment unforgettable</p></div></div>
                <div class="slide"><img src="https://raw.githubusercontent.com/photosbynithin/Photosbynithin/main/Images/Slide%20Show/Slide%20(4).jpg" alt="Hero 4"><div class="slide-overlay"><h1 class="hero-title">Pure Joy</h1><p class="hero-subtitle">Authentic emotions, beautifully captured</p></div></div>
                <div class="slide"><img src="https://raw.githubusercontent.com/photosbynithin/Photosbynithin/main/Images/Slide%20Show/Slide%20(5).jpg" alt="Hero 5"><div class="slide-overlay"><h1 class="hero-title">Timeless Elegance</h1><p class="hero-subtitle">Classic beauty in every frame</p></div></div>
                <div class="slide"><img src="https://raw.githubusercontent.com/photosbynithin/Photosbynithin/main/Images/Slide%20Show/Slide%20(6).jpg" alt="Hero 6"><div class="slide-overlay"><h1 class="hero-title">Natural Beauty</h1><p class="hero-subtitle">Candid moments, genuine smiles</p></div></div>
                <div class="slide"><img src="https://raw.githubusercontent.com/photosbynithin/Photosbynithin/main/Images/Slide%20Show/Slide%20(7).jpg" alt="Hero 7"><div class="slide-overlay"><h1 class="hero-title">Dream Weddings</h1><p class="hero-subtitle">Where fairy tales come to life</p></div></div>
                <div class="slide"><img src="https://raw.githubusercontent.com/photosbynithin/Photosbynithin/main/Images/Slide%20Show/Slide%20(8).jpg" alt="Hero 8"><div class="slide-overlay"><h1 class="hero-title">Family Bonds</h1><p class="hero-subtitle">Celebrating connections that matter</p></div></div>
                <div class="slide"><img src="https://raw.githubusercontent.com/photosbynithin/Photosbynithin/main/Images/Slide%20Show/Slide%20(9).jpg" alt="Hero 9"><div class="slide-overlay"><h1 class="hero-title">Golden Hour</h1><p class="hero-subtitle">Magic happens in perfect light</p></div></div>
                <div class="slide"><img src="https://raw.githubusercontent.com/photosbynithin/Photosbynithin/main/Images/Slide%20Show/Slide%20(10).jpg" alt="Hero 10"><div class="slide-overlay"><h1 class="hero-title">Forever Memories</h1><p class="hero-subtitle">Moments that will last a lifetime</p></div></div>
            </div>
            <div class="thumbnail-bar">
                <div class="thumbnail active" data-slide="0"><img src="https://raw.githubusercontent.com/photosbynithin/Photosbynithin/main/Images/Slide%20Show/Slide%20(1).jpg" alt="T1"></div>
                <div class="thumbnail" data-slide="1"><img src="https://raw.githubusercontent.com/photosbynithin/Photosbynithin/main/Images/Slide%20Show/Slide%20(2).jpg" alt="T2"></div>
                <div class="thumbnail" data-slide="2"><img src="https://raw.githubusercontent.com/photosbynithin/Photosbynithin/main/Images/Slide%20Show/Slide%20(3).jpg" alt="T3"></div>
                <div class="thumbnail" data-slide="3"><img src="https://raw.githubusercontent.com/photosbynithin/Photosbynithin/main/Images/Slide%20Show/Slide%20(4).jpg" alt="T4"></div>
                <div class="thumbnail" data-slide="4"><img src="https://raw.githubusercontent.com/photosbynithin/Photosbynithin/main/Images/Slide%20Show/Slide%20(5).jpg" alt="T5"></div>
                <div class="thumbnail" data-slide="5"><img src="https://raw.githubusercontent.com/photosbynithin/Photosbynithin/main/Images/Slide%20Show/Slide%20(6).jpg" alt="T6"></div>
                <div class="thumbnail" data-slide="6"><img src="https://raw.githubusercontent.com/photosbynithin/Photosbynithin/main/Images/Slide%20Show/Slide%20(7).jpg" alt="T7"></div>
                <div class="thumbnail" data-slide="7"><img src="https://raw.githubusercontent.com/photosbynithin/Photosbynithin/main/Images/Slide%20Show/Slide%20(8).jpg" alt="T8"></div>
                <div class="thumbnail" data-slide="8"><img src="https://raw.githubusercontent.com/photosbynithin/Photosbynithin/main/Images/Slide%20Show/Slide%20(9).jpg" alt="T9"></div>
                <div class="thumbnail" data-slide="9"><img src="https://raw.githubusercontent.com/photosbynithin/Photosbynithin/main/Images/Slide%20Show/Slide%20(10).jpg" alt="T10"></div>
            </div>
        </section>

        <section id="stories" class="section">
            <h2 class="section-title">Our Stories</h2>
            <div class="stories-grid">
                
                <div class="story-item">
                    <div class="story-card" data-collection="yashna-birthday">
                        <img src="https://raw.githubusercontent.com/photosbynithin/Photosbynithin/main/Images/Birthday-2/Birthday-B%20(1).jpg" alt="Yashna's Birthday">
                        <div class="story-overlay"><h3 class="story-title">Yashna's Birthday</h3><p class="story-subtitle">A beautiful celebration of love</p></div>
                    </div>
                    <div class="story-dropdown" id="dropdown-yashna-birthday">
                        <!-- Content generated by JS -->
                        <div class="story-photos"></div>
                    </div>
                </div>
                
                <div class="story-item">
                    <div class="story-card" data-collection="house-warming">
                        <img src="https://raw.githubusercontent.com/photosbynithin/Photosbynithin/main/Images/House%20Warming/HouseWarming%20(1).jpg" alt="House Warming">
                        <div class="story-overlay"><h3 class="story-title">Sagar & Varsha's House Warming</h3><p class="story-subtitle">Exciting moments of anticipation</p></div>
                    </div>
                    <div class="story-dropdown" id="dropdown-house-warming">
                        <!-- Content generated by JS -->
                        <div class="story-photos"></div>
                    </div>
                </div>
                
                <div class="story-item">
                    <div class="story-card" data-collection="shridhi-birthday">
                        <img src="https://raw.githubusercontent.com/photosbynithin/Photosbynithin/main/Images/Birthday-1/Birthday-A%20(1).jpg" alt="Shridhi's Birthday">
                        <div class="story-overlay"><h3 class="story-title">Shridhi's Birthday</h3><p class="story-subtitle">Joyful celebration with family</p></div>
                    </div>
                    <div class="story-dropdown" id="dropdown-shridhi-birthday">
                        <!-- Content generated by JS -->
                        <div class="story-photos"></div>
                    </div>
                </div>

            </div>
        </section>

        <section id="messages" class="section messages-section">
            <h2 class="section-title">Messages from Our Clients</h2>
            <div class="messages-slider">
                <div class="message-container" id="messageContainer">
                    <!-- Background images will be set by JS -->
                    <div class="message">
                        <div class="message-bg"></div>
                        <div class="message-content">
                            <p class="message-text">"Absolutely stunning work! They captured every precious moment of our wedding day perfectly. The photos are beyond our expectations and we couldn't be happier!"</p>
                            <p class="message-author">— Sarah & Michael</p>
                        </div>
                    </div>
                    <div class="message">
                        <div class="message-bg"></div>
                        <div class="message-content">
                            <p class="message-text">"Professional, creative, and so easy to work with. Our family portraits turned out amazing and the whole experience was wonderful. Highly recommend!"</p>
                            <p class="message-author">— The Johnson Family</p>
                        </div>
                    </div>
                    <div class="message">
                        <div class="message-bg"></div>
                        <div class="message-content">
                            <p class="message-text">"They have an incredible eye for detail and made our special day even more memorable. The photos tell our story beautifully!"</p>
                            <p class="message-author">— Emma & David</p>
                        </div>
                    </div>
                </div>
                <button class="slider-nav prev" onclick="changeMessage(-1)">‹</button>
                <button class="slider-nav next" onclick="changeMessage(1)">›</button>
            </div>
        </section>

        <!-- New Gemini AI Inquiry Section -->
        <section id="inquiry" class="section">
            <h2 class="section-title">Plan Your Perfect Shoot</h2>
            <div class="inquiry-form-container">
                <p class="inquiry-subtitle">Tell us about your event, and our AI assistant can help you brainstorm ideas!</p>
                <form id="inquiry-form" class="inquiry-form">
                    <div class="form-group">
                        <label for="event-type">Event Type</label>
                        <select id="event-type" name="event-type">
                            <option value="Wedding">Wedding</option>
                            <option value="Birthday Party">Birthday Party</option>
                            <option value="Family Portrait">Family Portrait</option>
                            <option value="Corporate Event">Corporate Event</option>
                            <option value="Other">Other</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="event-guests">Est. Guests</label>
                        <select id="event-guests" name="event-guests">
                            <option value="1-25">1-25</option>
                            <option value="25-100">25-100</option>
                            <option value="100+">100+</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="event-location">Location (City, State)</label>
                        <input type="text" id="event-location" name="event-location" placeholder="e.g., San Francisco, CA">
                    </div>
                    <button type="submit" class="gemini-btn">✨ Get AI Suggestions</button>
                </form>
                <div id="gemini-loader" class="loader" style="display: none;"></div>
                <div id="gemini-response" class="gemini-response"></div>
            </div>
        </section>
    </main>

    <footer id="contact-footer" class="footer">
        <!-- Button now links to #inquiry section -->
        <a href="#inquiry" class="book-us-btn">Book Us Now</a>
        <div id="contact" class="contact-links">
            <a href="mailto:hello@photographer.com" class="contact-link">hello@photographer.com</a>
            <a href="https://wa.me/1234567890" class="contact-link" target="_blank">WhatsApp</a>
            <a href="https://instagram.com/photographer" class="contact-link" target="_blank">Instagram</a>
            <a href="tel:+1234567890" class="contact-link">+1 (234) 567-8900</a>
        </div>
    </footer>

    <div class="lightbox" id="lightbox">
        <div class="lightbox-content">
            <img id="lightboxImg" src="" alt="Gallery Image">
            <div class="lightbox-close" onclick="closeLightbox()">×</div>
            <div class="lightbox-nav prev" onclick="changeLightboxImage(-1)">‹</div>
            <div class="lightbox-nav next" onclick="changeLightboxImage(1)">›</div>
        </div>
    </div>

    <script>
        // Wait for the DOM to be fully loaded
        document.addEventListener('DOMContentLoaded', () => {

            // --- Removed Header/Nav JS ---
            // All JS for hamburger, navMenu, and closeMenu() has been removed.

            // --- Intro Animation & Slideshow Start ---
            const introOverlay = document.getElementById('intro-overlay');
            setTimeout(() => {
                // Hide overlay completely after animation
                if (introOverlay) {
                    introOverlay.style.display = 'none';
                }
                // Start the slideshow *after* the intro is finished
                startSlideshow();
            }, 3500); // Matches 2s text + 1.5s fade-out animation

            // --- Hero Slideshow ---
            let currentSlide = 0;
            const slides = document.querySelectorAll('.slide');
            const thumbnails = document.querySelectorAll('.thumbnail');
            let slideInterval;

            function showSlide(index) {
                slides.forEach((slide, i) => { slide.classList.toggle('active', i === index); });
                thumbnails.forEach((thumb, i) => { thumb.classList.toggle('active', i === index); });
                currentSlide = index;
            }

            function nextSlide() {
                currentSlide = (currentSlide + 1) % slides.length;
                showSlide(currentSlide);
            }

            function startSlideshow() { 
                // Don't start until called after intro animation
                clearInterval(slideInterval); // Clear any existing
                slideInterval = setInterval(nextSlide, 3500); 
            }

            function stopSlideshow() { 
                clearInterval(slideInterval); 
            }

            thumbnails.forEach((thumb, index) => {
                thumb.addEventListener('click', () => {
                    stopSlideshow();
                    showSlide(index);
                    // Restart slideshow after a pause
                    setTimeout(startSlideshow, 5000); 
                });
            });
            
            // Note: startSlideshow() is no longer called here, but after the intro animation.

            // --- Messages Section ---
            let currentMessage = 0;
            const messageContainer = document.getElementById('messageContainer');
            const totalMessages = document.querySelectorAll('.message').length;

            function changeMessage(direction) {
                currentMessage += direction;
                if (currentMessage < 0) currentMessage = totalMessages - 1;
                if (currentMessage >= totalMessages) currentMessage = 0;
                const translateX = -currentMessage * 100;
                if (messageContainer) {
                    messageContainer.style.transform = `translateX(${translateX}%)`;
                }
            }
            // Autoplay messages
            setInterval(() => { changeMessage(1); }, 4000);

            // Set message backgrounds from slideshow images
            const slideshowImages = Array.from(document.querySelectorAll('.slide img')).map(img => img.src);
            const messageBgs = document.querySelectorAll('.message-bg');
            messageBgs.forEach((bg, index) => {
                // Use slideshow images, wrap around if more messages than slides
                if (slideshowImages.length > 0) {
                    bg.style.backgroundImage = `url(${slideshowImages[index % slideshowImages.length]})`;
                }
            });

            // --- Stories Section & Lightbox ---
            const pathPrefix = 'https://raw.githubusercontent.com/photosbynithin/Photosbynithin/main/Images/';
            
            // Database of story images
            const storyData = {
                'yashna-birthday': { count: 12, folder: 'Birthday-2', prefix: 'Birthday-B%20' },
                'house-warming': { count: 19, folder: 'House%20Warming', prefix: 'HouseWarming%20' },
                'shridhi-birthday': { count: 16, folder: 'Birthday-1', prefix: 'Birthday-A%20' }
            };

            let currentCollection = [];
            let currentImageIndex = 0;
            const lightbox = document.getElementById('lightbox');
            const lightboxImg = document.getElementById('lightboxImg');

            // Function to populate dropdowns with all images
            function populateStoryDropdowns() {
                Object.keys(storyData).forEach(collectionName => {
                    const data = storyData[collectionName];
                    const dropdown = document.getElementById(`dropdown-${collectionName}`);
                    if (!dropdown) return;

                    const photoContainer = dropdown.querySelector('.story-photos');
                    if (!photoContainer) return;

                    photoContainer.innerHTML = ''; // Clear any placeholders
                    let photoHtml = '';

                    for (let i = 1; i <= data.count; i++) {
                        const imgUrl = `${pathPrefix}${data.folder}/${data.prefix}(${i}).jpg`;
                        photoHtml += `<div class="story-photo"><img src="${imgUrl}" alt="${collectionName} Photo ${i}"></div>`;
                    }
                    
                    photoContainer.innerHTML = photoHtml;
                });

                // Now that photos are created, add click listeners for lightbox
                addLightboxListeners();
            }
            
            // Add listeners to all story cards to toggle dropdowns
            document.querySelectorAll('.story-card').forEach(card => {
                card.addEventListener('click', () => {
                    const collectionName = card.dataset.collection;
                    const dropdown = document.getElementById(`dropdown-${collectionName}`);
                    
                    // Close all other dropdowns
                    document.querySelectorAll('.story-dropdown').forEach(dd => {
                        if (dd !== dropdown) { 
                            dd.classList.remove('active'); 
                        }
                    });
                    
                    // Toggle the clicked one
                    if (dropdown) {
                        dropdown.classList.toggle('active');
                    }
                });
            });

            // Function to add click listeners to all (newly created) photos
            function addLightboxListeners() {
                document.querySelectorAll('.story-photo').forEach(photo => {
                    photo.addEventListener('click', (e) => {
                        e.stopPropagation(); // Prevent card click
                        
                        const img = photo.querySelector('img');
                        const src = img.src;
                        
                        // Find the collection this photo belongs to
                        const storyItem = photo.closest('.story-item');
                        const collectionName = storyItem.querySelector('.story-card').dataset.collection;
                        
                        // Build the current collection array from storyData
                        const data = storyData[collectionName];
                        currentCollection = [];
                        for (let i = 1; i <= data.count; i++) {
                            currentCollection.push(`${pathPrefix}${data.folder}/${data.prefix}(${i}).jpg`);
                        }
                        
                        // Find the index of the clicked image
                        currentImageIndex = currentCollection.findIndex(imgSrc => imgSrc === src);
                        
                        openLightbox();
                    });
                });
            }

            // --- Lightbox Global Functions ---
            window.openLightbox = function() {
                if (currentCollection.length > 0 && lightbox && lightboxImg) {
                    lightbox.style.display = 'flex';
                    lightboxImg.src = currentCollection[currentImageIndex];
                    document.body.style.overflow = 'hidden';
                }
            }

            window.closeLightbox = function() {
                if (lightbox) {
                    lightbox.style.display = 'none';
                    document.body.style.overflow = 'auto';
                }
            }

            window.changeLightboxImage = function(direction) {
                currentImageIndex += direction;
                if (currentImageIndex < 0) {
                    currentImageIndex = currentCollection.length - 1;
                }
                if (currentImageIndex >= currentCollection.length) {
                    currentImageIndex = 0;
                }
                if (lightboxImg) {
                    lightboxImg.src = currentCollection[currentImageIndex];
                }
            }
            
            // Lightbox close/nav listeners
            if (lightbox) {
                lightbox.addEventListener('click', (e) => {
                    if (e.target === lightbox) { closeLightbox(); }
                });
            }

            document.addEventListener('keydown', (e) => {
                if (lightbox && lightbox.style.display === 'flex') {
                    if (e.key === 'Escape') closeLightbox();
                    if (e.key === 'ArrowLeft') changeLightboxImage(-1);
                    if (e.key === 'ArrowRight') changeLightboxImage(1);
                }
            });

            // --- Smooth Scroll for Footer Link ---
            document.querySelectorAll('a[href^="#"]').forEach(anchor => {
                anchor.addEventListener('click', function (e) {
                    e.preventDefault();
                    const target = document.querySelector(this.getAttribute('href'));
                    if (target) { 
                        target.scrollIntoView({ behavior: 'smooth', block: 'start' }); 
                    }
                });
            });

            // --- Initial Population ---
            populateStoryDropdowns();

            // --- Gemini AI Inquiry Form ---
            const inquiryForm = document.getElementById('inquiry-form');
            const geminiLoader = document.getElementById('gemini-loader');
            const geminiResponse = document.getElementById('gemini-response');

            if (inquiryForm) {
                inquiryForm.addEventListener('submit', async (e) => {
                    e.preventDefault();
                    if (geminiLoader) geminiLoader.style.display = 'block';
                    if (geminiResponse) geminiResponse.innerHTML = '';

                    const eventType = document.getElementById('event-type').value;
                    const eventGuests = document.getElementById('event-guests').value;
                    const eventLocation = document.getElementById('event-location').value || 'a special location';

                    const userQuery = `I'm planning a ${eventType} in ${eventLocation} for ${eventGuests} guests. Can you give me 3 creative photo shoot ideas and a short sample shot list (5-7 items) for this event?`;
                    
                    const systemPrompt = "You are a friendly and creative photography assistant for 'Photos by Nitin'. Your goal is to help potential clients brainstorm ideas for their event. Provide suggestions in a concise, friendly, and inspiring tone. Format your response using simple HTML: use `<h3>` for titles (like 'Creative Ideas' or 'Sample Shot List') and `<ul>` and `<li>` for lists. Do not use markdown. Start with a friendly greeting.";

                    try {
                        const generatedText = await callGeminiAPI(userQuery, systemPrompt);
                        if (geminiResponse) geminiResponse.innerHTML = generatedText;
                    } catch (error) {
                        console.error('Gemini API call failed:', error);
                        if (geminiResponse) geminiResponse.innerHTML = '<p>Sorry, I couldn\'t generate suggestions at this time. Please try again later.</p>';
                    } finally {
                        if (geminiLoader) geminiLoader.style.display = 'none';
                    }
                });
            }

            /**
             * Calls the Gemini API with exponential backoff.
             */
            async function callGeminiAPI(userQuery, systemPrompt, retries = 3, delay = 1000) {
                const apiKey = ""; // API key is handled by the environment
                const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-09-2025:generateContent?key=${apiKey}`;

                const payload = {
                    contents: [{ parts: [{ text: userQuery }] }],
                    systemInstruction: {
                        parts: [{ text: systemPrompt }]
                    },
                };

                try {
                    const response = await fetch(apiUrl, {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify(payload)
                    });

                    if (!response.ok) {
                        // Handle throttling with retry
                        if (response.status === 429 && retries > 0) {
                            await new Promise(res => setTimeout(res, delay));
                            return callGeminiAPI(userQuery, systemPrompt, retries - 1, delay * 2);
                        }
                        throw new Error(`API response error: ${response.status} ${response.statusText}`);
                    }

                    const result = await response.json();
                    const candidate = result.candidates?.[0];

                    if (candidate && candidate.content?.parts?.[0]?.text) {
                        return candidate.content.parts[0].text;
                    } else {
                        // Handle empty or invalid response
                        throw new Error('Invalid response structure from API.');
                    }
                } catch (error) {
                    // Retry on network errors
                    if (retries > 0) {
                        await new Promise(res => setTimeout(res, delay));
                        return callGeminiAPI(userQuery, systemPrompt, retries - 1, delay * 2);
                    } else {
                        console.error("Gemini API call failed after retries:", error);
                        throw error; // Re-throw the error after all retries fail
                    }
                }
            }

        }); // End DOMContentLoaded
    </script>
</body>
</html>

